<!-- multi-step-form.component.html -->
<div class="container" id="grad1">
    <div class="row justify-content-center">
        <div class="col-12 col-md-8">
            <div class="card mt-4">
                <div class="card-body">
                    <h2 class="text-center">Formulaire d'identité pour le fromage</h2>
                    <br>
                    <div class="card-body">
                        <ul id="progressbar" class="text-center">
                            <li [ngClass]="{'active': currentStep === 0}"><strong>Identifiants</strong></li>
                            <li [ngClass]="{'active': currentStep === 1}"><strong>Production</strong></li>
                            <li [ngClass]="{'active': currentStep === 2}"><strong>Fabrication</strong></li>
                            <li [ngClass]="{'active': currentStep === 3}"><strong>Affinage</strong></li>
                        </ul>
                        <div class="card-body ">
                            <form (ngSubmit)="onSubmit()" id="msform">
                                <div [ngSwitch]="currentStep">
                                    <!-- IDENTIFIANTS -->
                                    <div *ngSwitchCase="0">
                                        <div class="card p-3 mb-4">
                                            <h4 class="fs-title">Identifiants</h4>
                                            <div class="form-group mb-3">
                                                <label for="datePrelevement">Date de prélèvement</label>
                                                <input type="date" class="form-control" id="datePrelevement"
                                                    [(ngModel)]="cheese.datePrelevement" name="datePrelevement"
                                                    required />
                                            </div>
                                            <div class="form-group mb-3">
                                                <label for="numeroEchantillon">Numéro de l'échantillon</label>
                                                <input type="text" class="form-control" id="numeroEchantillon"
                                                    [(ngModel)]="cheese.numeroEchantillon" name="numeroEchantillon"
                                                    required />
                                            </div>
                                            <div class="form-group mb-3">
                                                <label for="identifiantProducteur">Identifiant du producteur</label>
                                                <input type="text" class="form-control" id="identifiantProducteur"
                                                    [(ngModel)]="cheese.identifiantProducteur"
                                                    name="identifiantProducteur" required />
                                            </div>
                                            <div class="form-group mb-3">
                                                <label for="typicite">Typicité</label>
                                                <select class="form-control" id="typicite" [(ngModel)]="cheese.typicite"
                                                    name="typicite" required>
                                                    <option value="" disabled selected>Sélectionnez la typicité</option>
                                                    <option value="Basque">Basque</option>
                                                    <option value="Béarnaise">Béarnaise</option>
                                                </select>
                                            </div>
                                        </div>
                                    </div>

                                    <!-- PRODUCTION -->
                                    <div *ngSwitchCase="1">
                                        <div class="card p-3 mb-4">
                                            <h4 class="fs-title">Production</h4>
                                            <div class="form-group mb-3">
                                                <label for="categorie">Catégorie</label>
                                                <select class="form-control" id="categorie"
                                                    [(ngModel)]="cheese.categorie" name="categorie" required>
                                                    <option value="" disabled selected>Sélectionnez une catégorie
                                                    </option>
                                                    <option value="Fermier">Fermier</option>
                                                    <option value="Laitier">Laitier</option>
                                                </select>
                                            </div>
                                            <div class="form-group mb-3">
                                                <label for="raceDominante">Race dominante</label>
                                                <select class="form-control" id="raceDominante"
                                                    [(ngModel)]="cheese.raceDominante" name="raceDominante" required>
                                                    <option value="" disabled selected>Sélectionnez la race dominante
                                                    </option>
                                                    <option value="Basco-béarnaise">Basco-béarnaise</option>
                                                    <option value="Manech tête rousse">Manech tête rousse</option>
                                                    <option value="Manech tête noire">Manech tête noire</option>
                                                    <option value="Mix">Mix</option>
                                                </select>
                                            </div>
                                            <div class="form-group mb-3">
                                                <label for="nbBrebis">Nombre de brebis (+6 mois) au 1er janvier
                                                    n-1</label>
                                                <input type="number" class="form-control" id="nbBrebis"
                                                    [(ngModel)]="cheese.nbBrebis" name="nbBrebis" required />
                                            </div>
                                            <div class="form-group mb-3">
                                                <label for="productivite">Productivité sur la campagne précédente (en
                                                    litres)</label>
                                                <input type="number" class="form-control" id="productivite"
                                                    [(ngModel)]="cheese.productivite" name="productivite" required />
                                            </div>
                                            <div class="form-group mb-3">
                                                <label for="periodeAgnelage">Période d'agnelage</label>
                                                <select class="form-control" id="periodeAgnelage"
                                                    [(ngModel)]="cheese.periodeAgnelage" name="periodeAgnelage"
                                                    required>
                                                    <option value="" disabled selected>Sélectionnez la période
                                                        d'agnelage</option>
                                                    <option value="oct-nov">Oct-Nov</option>
                                                    <option value="nov-janv">Nov-Janv</option>
                                                    <option value="janv-mars">Janv-Mars</option>
                                                    <option value="avril">Avril</option>
                                                </select>
                                            </div>
                                            <div class="form-group mb-3 d-flex align-items-center">
                                                <label class="me-4">Ce fromage a-t-il été fabriqué en estive ?</label>
                                                <div class="form-check form-check-inline me-4">
                                                    <input type="radio" class="form-check-input" id="estiveOui"
                                                        [(ngModel)]="cheese.estive" name="estive" [value]="true"
                                                        required />
                                                    <label for="estiveOui" class="form-check-label ms-1">Oui</label>
                                                </div>
                                                <div class="form-check form-check-inline">
                                                    <input type="radio" class="form-check-input" id="estiveNon"
                                                        [(ngModel)]="cheese.estive" name="estive" [value]="false"
                                                        required />
                                                    <label for="estiveNon" class="form-check-label ms-1">Non</label>
                                                </div>
                                            </div>
                                            <div class="form-group mb-3 d-flex align-items-center">
                                                <label class="me-4">Ce fromage a-t-il été fait en période de
                                                    pâturage?</label>
                                                <div class="form-check form-check-inline me-4">
                                                    <input type="radio" class="form-check-input" id="paturageOui"
                                                        [(ngModel)]="cheese.paturage" name="paturage" [value]="true"
                                                        required />
                                                    <label for="paturageOui" class="form-check-label ms-1">Oui</label>
                                                </div>
                                                <div class="form-check form-check-inline">
                                                    <input type="radio" class="form-check-input" id="paturageNon"
                                                        [(ngModel)]="cheese.paturage" name="paturage" [value]="false"
                                                        required />
                                                    <label for="paturageNon" class="form-check-label ms-1">Non</label>
                                                </div>
                                            </div>

                                            <div class="form-group mb-3 d-flex align-items-center">
                                                <label class="me-4">Ce fromage est-il fabriqué au lait cru ?</label>
                                                <div class="form-check form-check-inline me-4">
                                                    <input type="radio" class="form-check-input" id="laitCruOui"
                                                        [(ngModel)]="cheese.laitCru" name="laitCru" [value]="true"
                                                        required />
                                                    <label for="laitCruOui" class="form-check-label ms-1">Oui</label>
                                                </div>
                                                <div class="form-check form-check-inline">
                                                    <input type="radio" class="form-check-input" id="laitCruNon"
                                                        [(ngModel)]="cheese.laitCru" name="laitCru" [value]="false"
                                                        required />
                                                    <label for="laitCruNon" class="form-check-label ms-1">Non</label>
                                                </div>
                                            </div>

                                        </div>
                                    </div>

                                    <!-- FABRICATION -->
                                    <div *ngSwitchCase="2">
                                        <div class="card p-3 mb-4">
                                            <h4 class="fs-title">Fabrication</h4>
                                            <div class="form-group mb-3">
                                                <label for="dateFabrication">Date de fabrication</label>
                                                <input type="date" class="form-control" id="dateFabrication"
                                                    [(ngModel)]="cheese.dateFabrication" name="dateFabrication"
                                                    required />
                                            </div>
                                            <div class="form-group mb-3">
                                                <label for="nombreTraites">Nombre de traites</label>
                                                <input type="number" class="form-control" id="nombreTraites"
                                                    [(ngModel)]="cheese.nombreTraites" name="nombreTraites" required />
                                            </div>
                                            <div class="form-group mb-3">
                                                <label for="temperatureEmpressurage">Température d'emprésurage
                                                    (°C)</label>
                                                <input type="number" class="form-control" id="temperatureEmpressurage"
                                                    [(ngModel)]="cheese.temperatureEmpressurage"
                                                    name="temperatureEmpressurage" required />
                                            </div>
                                            <div class="form-group mb-3">
                                                <label for="quantitePresure">Quantité de présure (ml)</label>
                                                <input type="number" class="form-control" id="quantitePresure"
                                                    [(ngModel)]="cheese.quantitePresure" name="quantitePresure"
                                                    required />
                                            </div>
                                            <div class="form-group mb-3">
                                                <label for="typeFerments">Type de ferments lactiques</label>
                                                <input type="text" class="form-control" id="typeFerments"
                                                    [(ngModel)]="cheese.typeFerments" name="typeFerments" required />
                                            </div>
                                            <div class="form-group mb-3">
                                                <label for="dureeCoagulation">Durée de coagulation (min)</label>
                                                <input type="number" class="form-control" id="dureeCoagulation"
                                                    [(ngModel)]="cheese.dureeCoagulation" name="dureeCoagulation"
                                                    required />
                                            </div>
                                            <div class="form-group mb-3">
                                                <label for="temperatureCaillage">Température de chauffage du caillé
                                                    (°C)</label>
                                                <input type="number" class="form-control" id="temperatureCaillage"
                                                    [(ngModel)]="cheese.temperatureCaillage" name="temperatureCaillage"
                                                    required />
                                            </div>
                                            <div class="form-group mb-3 d-flex align-items-center">
                                                <label class="me-4">Type de salage</label>
                                                <div class="form-check form-check-inline me-4">
                                                    <input type="radio" class="form-check-input" id="salageSec"
                                                        [(ngModel)]="cheese.salage" name="salage" [value]="'sec'"
                                                        required />
                                                    <label for="salageSec" class="form-check-label ms-1">À sec</label>
                                                </div>
                                                <div class="form-check form-check-inline">
                                                    <input type="radio" class="form-check-input" id="salageSaumure"
                                                        [(ngModel)]="cheese.salage" name="salage" [value]="'saumure'"
                                                        required />
                                                    <label for="salageSaumure" class="form-check-label ms-1">En
                                                        saumure</label>
                                                </div>
                                            </div>
                                            <div class="form-group mb-3 d-flex align-items-center">
                                                <label class="me-4">Report sous vide avant affinage</label>
                                                <div class="form-check form-check-inline me-4">
                                                    <input type="radio" class="form-check-input" id="reportVideOui"
                                                        [(ngModel)]="cheese.reportVide" name="reportVide" [value]="true"
                                                        required />
                                                    <label for="reportVideOui" class="form-check-label ms-1">Oui</label>
                                                </div>
                                                <div class="form-check form-check-inline">
                                                    <input type="radio" class="form-check-input" id="reportVideNon"
                                                        [(ngModel)]="cheese.reportVide" name="reportVide"
                                                        [value]="false" required />
                                                    <label for="reportVideNon" class="form-check-label ms-1">Non</label>
                                                </div>
                                            </div>
                                            <div class="form-group mb-3">
                                                <label for="dateMiseVide">Date de mise sous vide</label>
                                                <input type="date" class="form-control" id="dateMiseVide"
                                                    [(ngModel)]="cheese.dateMiseVide" name="dateMiseVide" required />
                                            </div>
                                            <div class="form-group mb-3">
                                                <label for="dateSortieVide">Date de sortie sous vide</label>
                                                <input type="date" class="form-control" id="dateSortieVide"
                                                    [(ngModel)]="cheese.dateSortieVide" name="dateSortieVide"
                                                    required />
                                            </div>
                                        </div>
                                    </div>

                                    <!-- AFFINAGE -->
                                    <div *ngSwitchCase="3">
                                        <div class="card p-3 mb-4">
                                            <h4 class="fs-title">Affinage</h4>
                                            <!-- Pré-affinage -->
                                            <div class="form-group mb-3 d-flex align-items-center">
                                                <label class="me-4">Pré-affinage</label>
                                                <div class="form-check form-check-inline me-4">
                                                    <input type="radio" class="form-check-input" id="preAffinageOui"
                                                        [(ngModel)]="cheese.preAffinage" name="preAffinage"
                                                        [value]="true" (change)="showPreAffinageFields()" required />
                                                    <label for="preAffinageOui"
                                                        class="form-check-label ms-1">Oui</label>
                                                </div>
                                                <div class="form-check form-check-inline">
                                                    <input type="radio" class="form-check-input" id="preAffinageNon"
                                                        [(ngModel)]="cheese.preAffinage" name="preAffinage"
                                                        [value]="false" (change)="showPreAffinageFields()" required />
                                                    <label for="preAffinageNon"
                                                        class="form-check-label ms-1">Non</label>
                                                </div>
                                            </div>

                                            <!-- Champs supplémentaires pour Pré-affinage -->
                                            <div *ngIf="cheese.preAffinage" class="mb-3">
                                                <div class="d-flex align-items-center">
                                                    <label class="me-4">Durée (jours)</label>
                                                    <input type="number" class="form-control me-4"
                                                        [(ngModel)]="cheese.dureeAffinage" name="dureeAffinage" min="0"
                                                        required />
                                                    <label class="me-4">Température (°C)</label>
                                                    <input type="number" class="form-control"
                                                        [(ngModel)]="cheese.tempPreAffinage" name="temperatureAffinage"
                                                        min="0" required />
                                                </div>
                                            </div>

                                            <!-- Brossage manuel -->
                                            <div class="form-group mb-3 d-flex align-items-center">
                                                <label class="me-4">Brossage manuel</label>
                                                <div class="form-check form-check-inline me-4">
                                                    <input type="radio" class="form-check-input" id="brossageManuelOui"
                                                        [(ngModel)]="cheese.brossageManuel" name="brossageManuel"
                                                        [value]="true" required />
                                                    <label for="brossageManuelOui"
                                                        class="form-check-label ms-1">Oui</label>
                                                </div>
                                                <div class="form-check form-check-inline">
                                                    <input type="radio" class="form-check-input" id="brossageManuelNon"
                                                        [(ngModel)]="cheese.brossageManuel" name="brossageManuel"
                                                        [value]="false" required />
                                                    <label for="brossageManuelNon"
                                                        class="form-check-label ms-1">Non</label>
                                                </div>
                                            </div>

                                            <!-- Température d'affinage -->
                                            <div class="form-group mb-3 d-flex align-items-center">
                                                <label class="me-4">Température d'affinage (°C)</label>
                                                <input type="number" class="form-control"
                                                    [(ngModel)]="cheese.tempAffinage" name="tempAffinage" min="0"
                                                    required />
                                            </div>

                                            <!-- Système d'humidification de la cave -->
                                            <div class="form-group mb-3 d-flex align-items-center">
                                                <label class="me-4">Système d'humidification de la cave</label>
                                                <input type="Text" class="form-control"
                                                    [(ngModel)]="cheese.humidificationCave" name="humidificationCave" 
                                                    required />
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                        <!-- Boutons de navigation -->
                                        <div class="d-flex justify-content-between mt-4">
                                            <button type="button" class="action-button-previous" (click)="previousStep()"
                                                *ngIf="currentStep > 0">Précédent</button>
                                            <button type="button" class="action-button" (click)="nextStep()"
                                                *ngIf="currentStep < 3">Suivant</button>
                                            <button type="submit" class="action-button"
                                                *ngIf="currentStep === 3">Terminer</button>
                                        </div>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>